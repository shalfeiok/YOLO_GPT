# Переработка пользовательского интерфейса

## Цель

Сделать интерфейс современным, визуально привлекательным и удобным при сохранении всей функциональности. Стек: **Python + CustomTkinter** (десктоп), без веб-фреймворков.

## Что сделано

### 1. Дизайн-система (`app/ui/theme.py`)

- **Палитра**: основной фон, поверхности (карточки), акцент, текст основной/вторичный, границы, статусы (успех/предупреждение/ошибка). Для светлой и тёмной темы — пары `(light, dark)`.
- **Отступы и радиусы**: `SPACE_XS` … `SPACE_XL`, `RADIUS_SM/MD/LG`, `CARD_PADDING`, `BORDER_WIDTH`.
- **Типографика**: `FONT_TITLE`, `FONT_HEADING`, `FONT_SECTION`, `FONT_BODY`, `FONT_CAPTION`, `FONT_BUTTON` (шрифт Inter, иерархия заголовков и текста).
- **Хелперы**: `card_kwargs()`, `card_transparent_kwargs()`, `button_primary_kwargs()`, `button_secondary_kwargs()` для единообразного вида карточек и кнопок.

### 2. Переиспользуемые компоненты (`app/ui/widgets/cards.py`)

- **Card** — контейнер с фоном, скруглением и отступами; внутри свой `content` для размещения виджетов.
- **SectionCard** — карточка с заголовком и опциональным подзаголовком; контент секции размещается в `content`.

Экспорт: `Card`, `SectionCard` в `app.ui.widgets`.

### 3. Главное окно (`app/ui/main_window.py`)

- Фон окна из темы (`COLOR_BG_MAIN`).
- **Шапка**: название приложения (FONT_TITLE) + кнопка **«Светлая тема» / «Тёмная тема»** (переключатель `ctk.set_appearance_mode`).
- Стилизованный **CTkTabview** (цвета сегментов вкладок под тему).
- Единые отступы `SPACE_LG`, `SPACE_MD` между шапкой и контентом вкладок.

### 4. Вкладка «Интеграции и мониторинг»

- Заголовок вкладки через `FONT_HEADING`.
- Кнопки «Экспорт/Импорт конфигурации» через `button_secondary_kwargs()`.
- Секция **E. Дополнительные гайды** переведена на **SectionCard** с подзаголовком; кнопки-ссылки — вторичные по теме.
- Увеличенные отступы между секциями (`SPACE_LG`), подпись о пути конфига через `FONT_CAPTION` и `COLOR_TEXT_SECONDARY`.
- Прокручиваемая область с прозрачным фоном для визуальной согласованности.

### 5. Остальные вкладки

- **Датасеты**, **Обучение**, **Детекция** пока используют прежнюю разметку и свои секции; к ним можно постепенно применять `Card`/`SectionCard` и токены из `theme.py` по тому же принципу, что и в «Интеграциях».

## Группировка функциональности (категории)

Сохранена текущая структура по вкладкам:

| Вкладка | Содержимое |
|--------|------------|
| **Датасеты** | Приведение к YOLO, превью с метками, аугментация (эффекты), фильтр/экспорт по классам, объединение и переименование классов. |
| **Обучение** | Датасеты, модель, гиперпараметры, запуск обучения, метрики, консоль, очистка runs. |
| **Детекция** | Модель, источник (экран/окно/камера/видео), Confidence/IOU, визуализация (OpenCV / D3DShot+PyTorch), фичи в реальном времени (Solutions). |
| **Интеграции и мониторинг** | A. Albumentations, B. Comet ML, C. DVC, D. SageMaker, F. K-Fold, G. Tuning, H. Экспорт модели, I. SAHI, J. Сегментация, K. Валидация, L. Solutions, M. Гайды и лаунчеры, E. Доп. гайды (ссылки). Экспорт/импорт конфигурации. |

Внутри вкладок функции сгруппированы по секциям (карточки/блоки); в «Интеграциях» секция E вынесена в единый стиль SectionCard.

## Технические детали

- **Адаптивность**: окно имеет `minsize(900, 620)`; контент растягивается по grid/pack. На десктопе «mobile-first» реализован за счёт гибких колонок и скролла.
- **Доступность**: семантика сохранена (заголовки, подписи); переключатель темы доступен с клавиатуры (Tab + Enter). CTk сам обрабатывает фокус.
- **Микро-взаимодействия**: используются стандартные `hover_color` у кнопок; анимации ограничены возможностями CustomTkinter.
- **Тёмная тема**: переключатель в шапке меняет глобальную тему приложения; палитра в `theme.py` задана парами для светлой и тёмной темы.

## Как развивать дальше

1. Постепенно заменять «сырые» `CTkFrame` на `Card`/`SectionCard` во вкладках Датасеты, Обучение, Детекция.
2. Подключать `button_primary_kwargs` / `button_secondary_kwargs` для всех кнопок.
3. Использовать константы отступов и шрифты из `theme.py` во всех новых блоках.
4. При необходимости добавить состояния загрузки (прогресс-бары уже есть в обучении) и пустые состояния (заглушки с текстом и, при желании, иконками).

## Файлы

- `app/ui/theme.py` — дизайн-токены.
- `app/ui/widgets/cards.py` — Card, SectionCard.
- `app/ui/widgets/__init__.py` — экспорт Card, SectionCard.
- `app/ui/main_window.py` — главное окно с шапкой и переключателем темы.
- `app/ui/integrations_tab.py` — применение темы и SectionCard для секции E.
- `docs/UI_OVERHAUL.md` — этот документ.
